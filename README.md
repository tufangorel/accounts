# User Savings Account REST API

REST endpoint that allows an existing user to open a savings account.

### Run with
 Run: `accounts > mvn spring-boot:run`

### Tech Stack
Spring Boot<br/>
Hibernate<br/>
H2 in memory db<br/>
 
### Database Tables
create table account (account_id integer generated by default as identity, balance decimal(19,2), primary key (account_id)) <br/>
create table user (user_id integer generated by default as identity, name varchar(255), primary key (user_id)) <br/>
create table user_account (account_id integer not null, user_id integer not null, primary key (account_id, user_id)) <br/>

### Database Tables Definitions
user = Stores user detail information (such as user name) <br/>
account = Stores account detail information (such as account balance) <br/>
user_account = Join table for user-savingAccount pairs <br/>

### Requirements
* Create a new user
* Add a savings account to an existing user

### Create a new user

Method : HTTP.POST <br/>
URL : http://localhost:8080/user/save <br/>

Request Input Test Data :
<pre>
{
	"name" : "Kiril"
}
</pre><br/>
Response : 

HTTP response code 200 <br/>
<pre>
{
    "userId": 2,
    "name": "Kiril"
}
</pre>

### Add a savings account to an existing user

Method : HTTP.POST <br/>
URL : http://localhost:8080/userSavingsAccount/save <br/>

<pre>
<b>Case 1 : Existing user id is provided in input JSON message </b>

Request Input Test Data :
{
    "userId": 1
}

Response : 

HTTP response code 200 <br/>

{
    "userId": 1,
    "accountId": 1
}

<b>Case 2 : Non-Existing user id is provided in input JSON message </b>

Request Input Test Data :
{
    "userId": 3
}

Response : 

HTTP response code 451 <br/>

{
    "msgList": [
        "User does not exist in the system. Save user before savings account creation."
    ]
}

<b>Case 3 : User having savings account is provided in input JSON message again. </b>

Request Input Test Data :
{
    "userId": 1
}

Response : 

HTTP response code 451 <br/>

{
    "msgList": [
        "User can have only one savings account. Duplicate savings account creation is not allowed."
    ]
}

<b>Case 4 : Savings account opening time is violated. </b>

Request Input Test Data :
{
    "userId": 1
}

Response : 

HTTP response code 451 <br/>

{
    "msgList": [
        "The account can only be opened between 8 AM and 5 PM."
    ]
}
</pre><br/>
